version: '3.7'

networks:
    default: 
        external:
            name: hub-network
            name: hub-db-network

services:    
    dashboard-web:
        container_name: "dashboard_web"
        image: "rhe89/hub-dashboard-web:latest"
        hostname: "dashboard-web"
        ports:
            - "${DASHBOARD_WEB_PORT}:443"
        environment: 
            - ASPNETCORE_ENVIRONMENT=${ASPNETCORE_ENVIRONMENT}
            - ASPNETCORE_URLS=https://+
            - ASPNETCORE_HTTPS_PORT=${DASHBOARD_WEB_PORT}
            - ASPNETCORE_Kestrel__Certificates__Default__Password=${ASPNETCORE_Kestrel__Certificates__Default__Password}
            - ASPNETCORE_Kestrel__Certificates__Default__Path=${ASPNETCORE_Kestrel__Certificates__Default__Path}
            - SQL_DB_DASHBOARD=${SQL_DB_DASHBOARD}
            - COINBASE_API_HOST=${COINBASE_API_HOST}
            - SBANKEN_API_HOST=${SBANKEN_API_HOST}
            - SPREADSHEET_API_HOST=${SPREADSHEET_API_HOST}
            - DOMAIN=Dashboard
        restart: on-failure
        volumes: 
            - "${WEB_CERT_FOLDER}:/https/"
        networks:
            - hub-network
            - hub-db-network